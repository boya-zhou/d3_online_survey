<!DOCTYPE html>
<html lang="en">
  <title>Experiment-Bar1</title>
  <meta charset="utf-8">
  <style>
    /* CSS part */
    html, body {
      margin: 0;
      padding:0;
      height: 100%;
      width: 100%;
    }
    h1 {
      color: #000000;
      font-family: 'Lucida Console';
      font-weight: normal;
      font-size: 2.5em;
      letter-spacing: .2em;
      line-height: 1.1em;
      text-align: center;
      text-transform: uppercase;
    }
    p {
      width:700px;
      color: #000000;
      font-family: 'Lucida Console';
      text-align: center;
      font-size: 1em;
      line-height: 1.2em;
      text-anchor: middle;
    }
    #container {
      width:800px;
    }
    #content {
      background-color:#ffffff;
      height:600px;
      width:800px;
      float:left;
      font-family: 'Lucida Console';
    }
    #footer {
      width:800px;
      height: 50px;
      background: #1abc9c;
      float:left;
    }
    button {
      margin: 10px;
      font-size: 12px;
    }
    #next {
      float:right;
    }
  </style>
  <head>
      <link href="nouislider.min.css" rel="stylesheet">
  </head>
  <body>
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/d3-random.v1.min.js"></script>
    <script src="nouislider.min.js"></script>

    <div id = "container">
      <div id ="content">
        <svg height="300" width="650">
        </svg>
        <script>
          var content = d3.select("#content");

          var svg = d3.select("svg");
          var w = 500,
              h = 100,
              N = 10,
              barPadding = 15;
              
          var dataBar = [];
          for (var i=0; i<N; i++) {
              var data = Math.random() * 100;   // random number (0-100)
              dataBar.push(data);
          }

          var barWidth = w/dataBar.length - barPadding;

          // Returns a random integer between min (included) and max (excluded)
          // Using Math.round() will give you a non-uniform distribution!
          // Ref: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
          function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min;
          }
          var chosenA = getRandomInt(0, N-1);
          var chosenB;
          for (i=0; i<10; i++) {
            chosenB = getRandomInt(0, N-1);
            if (chosenB != chosenA) {
              i = 10;
            }
          }
          var dataChosen = [[dataBar[chosenA], chosenA],
                            [dataBar[chosenB], chosenB]];

          svg.selectAll("rect")
             .data(dataBar)
             .enter()
             .append("rect")
             .attr("x", function(d, i) { return 140 + i * (w/dataBar.length); })
             .attr("y", function(d) { return 180 + h - 2.5 * d; })
             .attr("width", barWidth)
             .attr("height", function(d) { return d * 2.5; })
             .attr("fill", "#ffffff")
             .attr("stroke", "#000000");

          var mark = svg.selectAll("circle")
                        .data(dataChosen)
                        .enter()
                        .append("circle")
                        .attr("cx", function(d, i) { return 140 + d[1] * (w/dataBar.length) + barWidth * 0.5; })
                        .attr("cy", function(d) { return 0.5 * (360 + 2 * h - 2.5 * d[0]); })
                        .attr("r", 5)
                        .attr("fill", "#000000");

          var content = d3.select("#content");
          content.append("p")
                 .text('Two values are marked with dots.');
          content.append("p")
                 .attr("class", "aim")
                 .text('What do you think the percent of the smaller value to the larger value?');


          function toPie() {
            location.href = "pie.html";
          }
          
        </script>
        
          <div class="slider">
            <input type="range" id="slider-range" min="0" max="100" value="20">
          </div>
        <div id="result" value="0%">0%</div>
      </div>
    <div id ="footer">
      <button type="button" id = "next" onclick="toPie()">NEXT</button>
    </div>
  </div>
  </body>
</html>
